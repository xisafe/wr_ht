<style>
    .nav-tabs > li.active > a {
        color: #fff;
        background-color: #58AAFC;
        border: #777 solid 1px;
    }

    .nav-tabs > li.active > a:hover {
        color: #fff;
        background-color: #58AAFC;
        border: #777 solid 1px;
    }

    .nav-tabs > li.active > a:focus {
        color: #fff;
        background-color: #58AAFC;
        border: #777 solid 1px;
    }

    .nav-tabs > li > a {
        color: #333;
        background: #fff;
        border: #777 solid 1px;
        margin: 0 0 0 -1px;
        border-radius: 0px;
    }

    .nav-tabs > li > a:hover {
        color: #333;
        background: #fff;
        border: #777 solid 1px;
    }

    #myTab {
        padding-left: 30%;
        border-bottom: none;
    }

    label.col-sm-2 {
        width: 10%;
    }

    label.col-sm-3 {
        width: 19.5%;
    }

    .form-group {
        margin-bottom: 30px;
    }

</style>


<div class="panel" style="margin-bottom: 10px; overflow: hidden; padding: 10px 0;">
    <strong class="pull-left" style="line-height: 40px; padding-left: 10px;">编辑小额H5合作产品</strong>
    <ul id="myTab" class="nav nav-tabs pull-left">
        <li class="active"><a class="tab1" href="#tab1" data-toggle="tab">机构信息</a></li>
        <li><a class="tab2" href="#tab2" data-toggle="tab">产品信息</a></li>
        <li><a class="tab3" href="#tab3" data-toggle="tab">结算信息</a></li>
        <li><a class="tab4" href="#tab4" data-toggle="tab">链接信息</a></li>
    </ul>
</div>

<div id="myTabContent" class="tab-content">
    <div class="tab-pane active" id="tab1">
        <form class="form-horizontal">
            <div class="panel" style="margin-bottom: 0px;">
                <div class="panel-heading">机构信息</div>
                <input type="hidden" id="orgId" value="{{.org.Id}}"/>
                <div class="panel-body" style="padding: 30px 0;">
                    <div class="form-group">
                        <label for="jigouName" class="col-sm-2 control-label">机构名称<b style="color:red; vertical-align: -3px;">*</b></label>
                        <div class="col-sm-4">
                            <input type="text" class="form-control" id="jigouName" placeholder="请输入机构名称" value="{{.org.Name}}">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="contactAddr" class="col-sm-2 control-label">通讯录地址</label>
                        <div class="col-sm-4">
                            <input type="text" class="form-control" id="contactAddr" placeholder="请输入通讯录地址" value="{{.org.Address}}">   
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="contactMail" class="col-sm-2 control-label">联系邮箱</label>
                        <div class="col-sm-4">
                            <input type="text" class="form-control" id="contactMail" placeholder="请输入邮箱地址" value="{{.org.Email}}">
                        </div>
                    </div>
                </div>
            </div>
            <div class="panel">
                <div class="panel-heading">商务联系人</div>
                <input type="hidden" id="busId" value="{{.bus.Id}}"/>
                <div class="panel-body" style="padding: 30px 0;">
                    <div class="form-group">
                        <label for="contactName" class="col-sm-2 control-label">联系人姓名</label>
                        <div class="col-sm-3">
                            <input type="text" class="form-control" id="contactName" placeholder="请输入联系人姓名" value="{{.bus.Name}}">
                        </div>
                    </div>
                    <div style="clear: both;"></div>
                    <div class="left" style="width: 50%; float: left;">
                        <div class="form-group">
                            <label for="contactPhone" class="col-sm-3 control-label">手机号码</label>
                            <div class="col-sm-6">
                                <input type="text" class="form-control" id="contactPhone" placeholder="请输入联系人手机号码" value="{{.bus.Phone}}">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="QQCode" class="col-sm-3 control-label">QQ</label>
                            <div class="col-sm-6">
                                <input type="text" class="form-control" id="QQCode" placeholder="请输入联系人QQ" value="{{.bus.Qq}}">
                            </div>
                        </div>
                    </div>
                    <div class="right" style="width: 50%; float: left;">
                        <div class="form-group">
                            <label for="weixinCode" class="col-sm-3 control-label">微信</label>
                            <div class="col-sm-6">
                                <input type="text" class="form-control" id="weixinCode" placeholder="请输入联系人微信" value="{{.bus.Wechat}}">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="eMail" class="col-sm-3 control-label">邮箱</label>
                            <div class="col-sm-6">
                                <input type="eMail" class="form-control" id="email" placeholder="请输入联系人邮箱" value="{{.bus.Email}}">
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-info jigouDtlSave" id="jigouDtlSave" style="margin: 0 auto; display: block; width: 120px;">保存</button>
                </div>
            </div>
        </form>
    </div>

    <div class="tab-pane" id="tab2">
        <div class="form-horizontal">
            <div class="panel"  style="margin-bottom: 0px;">
                <div class="panel-heading">产品信息</div>
                <input type="hidden" id="productId" value="{{.product.Id}}"/>
                <div class="panel-body" style="padding: 30px 0;">
                    <div class="form-group">
                        <label for="proName" class="col-sm-2 control-label">产品名称<b style="color:red; vertical-align: -3px;">*</b></label>
                        <div class="col-sm-4">
                            <input type="text" class="form-control" id="proName" placeholder="请输入产品名称" value="{{.product.ProName}}">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="proLogo" class="col-sm-2 control-label">产品logo</label>
                        <div class="col-sm-4">
                            <img id="imgDisplay" alt="proLogo" src="{{.product.ProductLogo}}" width="189" height="189" />
                            <div style="height: 10px;"></div>
                            <form id="imgInput" enctype="multipart/form-data">
                                <input type="file" class="imgSelect" id="imgSelect" name="proIcon"/>
                            </form>
                            <input type="hidden" id="imgUrl" value="{{.product.ProductLogo}}"/>
                        </div>
                    </div>
                </div>
            </div>
            <div class="panel">
                <div class="panel-heading">贷款信息</div>
                <div class="panel-body" style="padding: 30px 0;">
                    <div class="left" style="width: 50%; float: left;">
                        <div class="form-group">
                            <label for="proApplicable" class="col-sm-3 control-label">产品期数<b style="color:red; vertical-align: -3px;">*</b></label>
                            <div class="col-sm-4" style="padding-left: : 10px;">
                                <input type="text" class="form-control" id="proApplicable" placeholder="以英文逗号隔开，例如1,3,5" value="{{.product.LoanTermCount}}">
                            </div>
                            <div class="col-sm-2" style="padding: 0;">
                                <select id="proApplicableUnit" class="form-control">
                                    <option {{if eq .product.LoanTermCountType "天"}}selected="selected"{{end}} >天</option>
                                    <option {{if eq .product.LoanTermCountType "月"}}selected="selected"{{end}} >月</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="minLimit" class="col-sm-3 control-label">最小额度<b style="color:red; vertical-align: -3px;">*</b></label>
                            <div class="col-sm-4" style="padding-left: : 10px;">
                                <input type="number" class="form-control" id="minLimit" placeholder="请输入最小额度" value="{{.product.MinMoney}}">
                            </div>
                            <span class="col-sm-2" style="padding: 8px 0 0 0; color: #65CEA7;">元</span>
                        </div>
                        <div class="form-group">
                            <label for="minDeadline" class="col-sm-3 control-label">最小贷款期限<b style="color:red; vertical-align: -3px;">*</b></label>
                            <div class="col-sm-4" style="padding-left: : 10px;">
                                <input type="number" class="form-control" id="minDeadline" placeholder="请输入最小贷款期限" value="{{.product.MinLoanTerm}}">
                            </div>
                            <div class="col-sm-2" style="padding: 0;">
                                <select id="minDeadlineUnit" class="form-control">
                                    <option {{if eq .product.LoanTermUnit 0}}selected="selected"{{end}} >天</option>
                                    <option {{if eq .product.LoanTermUnit 1}}selected="selected"{{end}} >月</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div style="width: 50%; float: left;">
                        <div class="form-group">
                            <label for="LendingRate" class="col-sm-3 control-label">放款速度<b style="color:red; vertical-align: -3px;">*</b></label>
                            <div class="col-sm-4">
                                <input type="text" class="form-control" id="LendingRate" placeholder="请输入放款速度" value="{{.product.LoanSpeed}}">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="maxLimit" class="col-sm-3 control-label">最大额度<b style="color:red; vertical-align: -3px;">*</b></label>
                            <div class="col-sm-4">
                                <input type="number" class="form-control" id="maxLimit" placeholder="请输入最大额度" value="{{.product.MaxMoney}}">
                            </div>
                            <span class="col-sm-2" style="padding: 8px 0 0 0; color: #65CEA7;">元</span>
                        </div>
                        <div class="form-group">
                            <label for="maxDeadline" class="col-sm-3 control-label">最大贷款期限<b style="color:red; vertical-align: -3px;">*</b></label>
                            <div class="col-sm-4" style="padding-left: : 10px;">
                                <input type="number" class="form-control" id="maxDeadline" placeholder="请输入最大贷款期限" value="{{.product.MaxLoanTerm}}">
                            </div>
                            <div class="col-sm-2" style="padding: 0;">
                                <select id="maxDeadlineUnit" class="form-control">
                                    <option {{if eq .product.LoanTermUnit 0}}selected="selected"{{end}} >天</option>
                                    <option {{if eq .product.LoanTermUnit 1}}selected="selected"{{end}} >月</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="rateTypeSelect" class="col-sm-2 control-label">利率类型</label>
                        <div class="col-sm-2">
                            <select id="rateTypeSelect" class="form-control">
                                <option {{if eq .product.FeeType 1}}selected="selected"{{end}} >定值</option>
                                <option {{if eq .product.FeeType 2}}selected="selected"{{end}}>区间</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group rate">
                        <label for="rate" class="col-sm-2 control-label">利率<b style="color:red; vertical-align: -3px;">*</b></label>
                        <div class="col-sm-2" style="padding-left: : 10px;">
                            <input type="number" class="form-control" id="rate" placeholder="请输入利率" value="{{.product.LoanFee}}">
                        </div>
                        <div class="col-sm-1" style="padding: 0;">
                            <select id="rateUnit" class="form-control">
                                <option {{if eq .product.FeeMethod 1}}selected="selected"{{end}} >月利率</option>
                                <option {{if eq .product.FeeMethod 2}}selected="selected"{{end}} >日利率</option>
                            </select>
                        </div>
                    </div>
                    <div style="width: 50%; float: left;">
                        <div class="form-group rate_m" style="display: none;">
                            <label for="minRate" class="col-sm-3 control-label">最小利率<b style="color:red; vertical-align: -3px;">*</b></label>
                            <div class="col-sm-4" style="padding-left: : 10px;">
                                <input type="number" class="form-control" id="minRate" placeholder="请输入最小利率" value="{{.product.MinFee}}">
                            </div>
                            <div class="col-sm-2" style="padding: 0;">
                                <select id="minRateUnit" class="form-control">
                                    <option {{if eq .product.FeeMethod 1}}selected="selected"{{end}} >月利率</option>
                                    <option {{if eq .product.FeeMethod 2}}selected="selected"{{end}} >日利率</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div style="width: 50%; float: left;">
                         <div class="form-group rate_m" style="display: none;">
                             <label for="maxRate" class="col-sm-3 control-label">最大利率<b style="color:red; vertical-align: -3px;">*</b></label>
                             <div class="col-sm-4" style="padding-left: : 10px;">
                                 <input type="number" class="form-control" id="maxRate" placeholder="请输入最大利率" value="{{.product.MaxFee}}">
                             </div>
                             <div class="col-sm-2" style="padding: 0;">
                                 <select id="maxRateUnit" class="form-control">
                                    <option {{if eq .product.FeeMethod 1}}selected="selected"{{end}} >月利率</option>
                                    <option {{if eq .product.FeeMethod 2}}selected="selected"{{end}} >日利率</option>
                                 </select>
                             </div>
                         </div>
                    </div>
                    <div class="form-group">
                        <label for="beforeLoanFeeTypeSelect" class="col-sm-2 control-label">贷前服务费类型</label>
                        <div class="col-sm-2">
                            <select id="beforeLoanFeeTypeSelect" class="form-control">
                                <option {{if eq .product.ServiceFeeType 1}}selected="selected"{{end}} >定值</option>
                                <option {{if eq .product.ServiceFeeType 2}}selected="selected"{{end}} >区间</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group service">
                        <label for="beforeLoanServiceFee" class="col-sm-2 control-label">贷前服务费</label>
                        <div class="col-sm-2" style="padding-left: : 10px;">
                            <input type="number" class="form-control" id="beforeLoanServiceFee" placeholder="请输入贷前服务费" value="{{.product.LoanServiceBeforeFee}}">
                        </div>
                        <span class="col-sm-1" style="padding: 8px 0 0 0; color: #65CEA7;">元</span>
                    </div>
                    <div style="width: 50%; float: left;">
                        <div class="form-group service_m" style="display: none;">
                            <label for="minLoanServiceFee" class="col-sm-3 control-label">最小服务费</label>
                            <div class="col-sm-4" style="padding-left: : 10px;">
                                <input type="number" class="form-control" id="minLoanServiceFee" placeholder="请输入最小服务费" value="{{.product.MinServiceFee}}">
                            </div>
                            <span class="col-sm-2" style="padding: 8px 0 0 0; color: #65CEA7;">元</span>
                        </div>
                    </div>
                    <div style="width: 50%; float: left;">
                        <div class="form-group service_m" style="display: none;">
                            <label for="maxLoanServiceFee" class="col-sm-3 control-label">最大服务费</label>
                            <div class="col-sm-4" style="padding-left: : 10px;">
                                <input type="number" class="form-control" id="maxLoanServiceFee" placeholder="请输入最大服务费" value="{{.product.MaxServiceFee}}">
                            </div>
                            <span class="col-sm-2" style="padding: 8px 0 0 0; color: #65CEA7;">元</span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="adminFeeTypeSelect" class="col-sm-2 control-label">管理费类型</label>
                        <div class="col-sm-2">
                            <select id="adminFeeTypeSelect" class="form-control">
                                <option {{if eq .product.ManagementFeeType 1}}selected="selected"{{end}} >定值</option>
                                <option {{if eq .product.ManagementFeeType 2}}selected="selected"{{end}} >区间</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group strative">
                        <label for="administrativeFee" class="col-sm-2 control-label">管理费</label>
                        <div class="col-sm-2" style="padding-left: : 10px;">
                            <input type="number" class="form-control" id="administrativeFee" placeholder="请输入管理费" value="{{.product.ManagementFee}}">
                        </div>
                        <div class="col-sm-1">
                            <select id="administrativeFeeUnit" class="form-control">
                                <option  {{if eq .product.ManagementFeeUnit 1}}selected="selected"{{end}} >日管理费</option>
                                <option  {{if eq .product.ManagementFeeUnit 2}}selected="selected"{{end}} >月管理费</option>
                            </select>
                        </div>
                    </div>
                    <div style="width: 50%; float: left;">
                        <div class="form-group strative_m" style="display: none;">
                            <label for="minAdministrativeFee" class="col-sm-3 control-label">最小管理费</label>
                            <div class="col-sm-4" style="padding-left: : 10px;">
                                <input type="number" class="form-control" id="minAdministrativeFee" placeholder="请输入最小管理费" value="{{.product.MinManagementFee}}">
                            </div>
                            <div class="col-sm-2" style="padding: 0;">
                                <select id="minAdministrativeFeeUnit" class="form-control">
                                    <option {{if eq .product.ManagementFeeUnit 1}}selected="selected"{{end}} >日管理费</option>
                                    <option {{if eq .product.ManagementFeeUnit 2}}selected="selected"{{end}} >月管理费</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div style="width: 50%; float: left;">
                        <div class="form-group strative_m" style="display: none;">
                            <label for="maxAdministrativeFee" class="col-sm-3 control-label">最大管理费</label>
                            <div class="col-sm-4" style="padding-left: : 10px;">
                                <input type="number" class="form-control" id="maxAdministrativeFee" placeholder="请输入最大管理费" value="{{.product.MaxManagementFee}}">
                            </div>
                            <div class="col-sm-2" style="padding: 0;">
                                <select id="maxAdministrativeFeeUnit" class="form-control">
                                    <option  {{if eq .product.ManagementFeeUnit 1}}selected="selected"{{end}} >日管理费</option>
                                    <option  {{if eq .product.ManagementFeeUnit 2}}selected="selected"{{end}} >月管理费</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="chargeInterest" class="col-sm-2 control-label">利息收取</label>
                        <div class="col-sm-2">
                            <select id="chargeInterest" class="form-control">
                                <option  {{if eq .product.FeePayTimeType 1}}selected="selected"{{end}} >贷前收取</option>
                                <option  {{if eq .product.FeePayTimeType 2}}selected="selected"{{end}} >贷后收取</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="rateDetails" class="col-sm-2 control-label">利率详情<b style="color:red; vertical-align: -3px;">*</b></label>
                        <div class="col-sm-4">
                            <textarea id="rateDetails" class="form-control" style="height: 100px; max-height: 100px;" placeholder="请输入利率详情">{{.product.InterestRateDetails}}</textarea>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="repaymentWay" class="col-sm-2 control-label">还款方式<b style="color:red; vertical-align: -3px;">*</b></label>
                        <div class="col-sm-4">
                            <textarea id="repaymentWay" class="form-control" style="height: 100px; max-height: 100px;" placeholder="请输入还款方式">{{.product.PaymentMethod}}</textarea>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="advanceRepay" class="col-sm-2 control-label">提前还款<b style="color:red; vertical-align: -3px;">*</b></label>
                        <div class="col-sm-4">
                            <textarea id="advanceRepay" class="form-control" style="height: 100px; max-height: 100px;" placeholder="请输入提前还款">{{.product.Prepayment}}</textarea>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="LatePolicy" class="col-sm-2 control-label">逾期政策<b style="color:red; vertical-align: -3px;">*</b></label>
                        <div class="col-sm-4">
                            <textarea id="LatePolicy" class="form-control" style="height: 100px; max-height: 100px;" placeholder="请输入逾期政策">{{.product.LatePolicy}}</textarea>
                        </div>
                    </div>
                    <!--是否使用-->
                    <input type="hidden" id="IsUse" value="{{.product.IsUse}}"/>
                    <!--合作方式-->
                    <input type="hidden" id="cooperationType" value="{{.product.CooperationType}}"/>
                    <!--创建时间-->
                    <input type="hidden" id="ProCreateTime" value="{{.product.CreateTime}}"/>

                    <button type="button" class="btn btn-info proDtlSave" id="proDtlSave" style="margin: 0 auto; display: block; width: 120px;">保存</button>
                </div>
            </div>
        </div>
    </div>

    <div class="tab-pane" id="tab3">
        <form class="form-horizontal">
            <div class="panel"  style="margin-bottom: 0px;">
                <div class="panel-heading">合作方式</div>

                <input type="hidden" id="cleaningId" value="{{.cleaning.Id}}"/> <!--产品id-->
                <input type="hidden" id="proId" value="{{.cleaning.ProductId}}"/> <!--产品id-->

                <div class="panel-body" style="padding: 30px 0;">
                    <div style="width: 50%; float: left;">
                        <div class="form-group">
                            <label for="cooperateModel" class="col-sm-3 control-label">合作模式</label>
                            <div class="col-sm-4">
                                <select id="cooperateModel" class="form-control">
                                    <option {{if eq .cleaning.JointMode 1}}selected="selected"{{end}} >CPA</option>
                                    <option {{if eq .cleaning.JointMode 2}}selected="selected"{{end}} >CPS</option>
                                    <option {{if eq .cleaning.JointMode 3}}selected="selected"{{end}} >CPA+CPS</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="ASelect" class="col-sm-3 control-label">A有效性定义</label>
                            <div class="col-sm-4">
                                <select id="ASelect" class="form-control">
                                    <option value="1">注册</option>
                                    <option value="2">认证</option>
                                    <option value="3">授信</option>
                                    <option value="4">申请借款</option>
                                    <option value="5">放款</option>
                                </select>
                            </div>
                            <script>
                                $("#ASelect option:contains({{.cleaning.CpaDefine}})").attr('selected','selected');
                            </script>
                        </div>
                        <div class="form-group">
                            <label for="first_lend" class="col-sm-3 control-label">S的首借百分比</label>
                            <div class="col-sm-4">
                                <input type="number" id="first_lend" class="form-control" placeholder="请输入S的首借百分比" value="{{.cleaning.CpsFirstPer}}">
                            </div>
                            <span class="col-sm-2" style="padding: 8px 0 0 0; color: #65CEA7;">%</span>
                        </div>
                        <div class="form-group">
                            <label for="settlementInterval" class="col-sm-3 control-label">结算周期</label>
                            <div class="col-sm-8">
                                <textarea id="settlementInterval" class="form-control" style="height: 100px; max-height: 100px;" placeholder="结算周期为周结、半月结、月结。也可自定义输入详细信息，例如：每月10号前结算">{{.cleaning.CleaningCycle}}</textarea>
                            </div>
                        </div>
                    </div>

                    <div style="width: 50%; float: left;">
                        <div class="form-group">
                            <label for="settleWays" class="col-sm-3 control-label">结算方式</label>
                            <div class="col-sm-4">
                                <select id="settleWays" class="form-control">
                                    <option {{if eq .cleaning.CleaningType 1}}selected="selected"{{end}} >对公</option>
                                    <option {{if eq .cleaning.CleaningType 2}}selected="selected"{{end}} >对私</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="APrice" class="col-sm-3 control-label">A的价格</label>
                            <div class="col-sm-4" style="padding-left: 10px;">
                                <input type="number" id="APrice" class="form-control" placeholder="请输入A的价格" value="{{.cleaning.CpaPrice}}">
                            </div>
                            <span class="col-sm-2" style="padding: 8px 0 0 0; color: #65CEA7;">元</span>
                        </div>
                        <div class="form-group">
                            <label for="after_lend" class="col-sm-3 control-label">S的复借百分比</label>
                            <div class="col-sm-4">
                                <input type="number" id="after_lend" class="form-control" placeholder="请输入S的复借百分比" value="{{.cleaning.CpsAgainPer}}">
                            </div>
                            <span class="col-sm-2" style="padding: 8px 0 0 0; color: #65CEA7;">%</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="panel" style="margin-bottom: 0px;">
                <div class="panel-heading">开票信息</div>
                <div class="panel-body" style="padding: 30px 0;">
                    <div class="form-group">
                        <label for="companyName" class="col-sm-2 control-label">公司名称</label>
                        <div class="col-sm-4">
                            <input type="text" class="form-control" id="companyName" placeholder="请输公司名称" value="{{.cleaning.CompanyName}}">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="companyAddr" class="col-sm-2 control-label">公司地址</label>
                        <div class="col-sm-4">
                            <input type="text" class="form-control" id="companyAddr" placeholder="请输公司地址" value="{{.cleaning.CompanyAddress}}">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="dutyParagraph" class="col-sm-2 control-label">税号</label>
                        <div class="col-sm-4">
                            <input type="text" class="form-control" id="dutyParagraph" placeholder="请输税号" value="{{.cleaning.TaxNumber}}">
                        </div>
                    </div>
                    <div class="left" style="width: 50%; float: left;">
                        <div class="form-group">
                            <label for="openingBank" class="col-sm-3 control-label">开户行</label>
                            <div class="col-sm-6">
                                <input type="text" id="openingBank" class="form-control" placeholder="请输入开户行" value="{{.cleaning.BankAccount}}">
                            </div>
                        </div>
                    </div>
                    <div class="right" style="width: 50%; float: left;">
                        <div class="form-group">
                            <label for="bankAccount" class="col-sm-3 control-label">银行账号</label>
                            <div class="col-sm-6">
                                <input type="number" id="bankAccount" class="form-control" placeholder="请输入银行账号" value="{{.cleaning.AccountBank}}">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="panel">
                <div class="panel-heading">后台信息</div>
                <div class="panel-body" style="padding: 30px 0;">
                    <div class="left" style="width: 50%; float: left;">
                        <div class="form-group">
                            <label for="companyWebsiteAddr" class="col-sm-3 control-label">公司网址</label>
                            <div class="col-sm-6">
                                <input type="text" id="companyWebsiteAddr" class="form-control" placeholder="请输入公司网址" value="{{.cleaning.BackUrl}}">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="bgAccount" class="col-sm-3 control-label">后台账号</label>
                            <div class="col-sm-6">
                                <input type="text" id="bgAccount" class="form-control" placeholder="请输入后台账号" value="{{.cleaning.BackAccount}}">
                            </div>
                        </div>
                    </div>
                    <div class="right" style="width: 50%; float: left;">
                        <div class="form-group">
                            <label for="channelNo" class="col-sm-3 control-label">渠道号</label>
                            <div class="col-sm-6">
                                <input type="number" id="channelNo" class="form-control" placeholder="请输入渠道号" value="{{.cleaning.FromNum}}">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="bgPassword" class="col-sm-3 control-label">后台密码</label>
                            <div class="col-sm-6">
                                <input type="text" id="bgPassword" class="form-control" placeholder="请输入后台密码" value="{{.cleaning.BackPwd}}">
                            </div>
                        </div>
                    </div>
                    <!--创建时间-->
                    <input type="hidden" id="cleaningCreateTime" value="{{.cleaning.CreateTime}}"/>
                    <div style="clear: both;"></div>
                    <button type="button" class="btn btn-info settleDtlSave" id="settleDtlSave" style="margin: 0 auto; display: block; width: 120px;">保存</button>
                </div>
            </div>
        </form>
    </div>

    <div class="tab-pane" id="tab4">
        <form class="form-horizontal">
            <div class="panel" style="margin-bottom: 0px;">
                <div class="panel-heading">主要链接</div>
                <!--MainUrlid-->
                <input type="hidden" id="UrlId" value="{{.mainUrl.UrlId}}"/>
                <input type="hidden" id="BeforeId" value="{{.mainUrl.BeforeId}}"/>
                <input type="hidden" id="AfterId" value="{{.mainUrl.AfterId}}"/>
                <div class="panel-body" style="padding: 30px 0;">
                    <div class="form-group">
                        <label for="url1" class="col-sm-2 control-label">我司链接<b style="color:red; vertical-align: -3px;">*</b></label>
                        <div class="col-sm-4">
                            <input type="text" class="form-control" id="url1" placeholder="请输入我司链接" value="{{.mainUrl.Url}}">
                        </div>
                    </div>
                </div>
            </div>
            <div class="panel" style="margin-bottom: 0px;">
                <div class="panel-heading">注册事件链接</div>
                <div class="panel-body" style="padding: 30px 0;">
                    <div class="form-group">
                        <label for="regste_url_before" class="col-sm-2 control-label">注册前链接<b style="color:red; vertical-align: -3px;">*</b></label>
                        <div class="col-sm-4">
                            <input type="text" class="form-control" id="regste_url_before" placeholder="请输公司名称" value="{{.mainUrl.RegsteUrlBefore}}">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="regste_url_after" class="col-sm-2 control-label">注册后链接</label>
                        <div class="col-sm-4">
                            <input type="text" class="form-control" id="regste_url_after" placeholder="请输公司地址" value="{{.mainUrl.RegsteUrlAfter}}">
                        </div>
                    </div>
                </div>
            </div>
            <div class="panel">
                <div class="panel-heading">代理链接</div>
                 <input type="hidden" id="agentUrlCount" value="{{.agentUrlCount}}"/>
                <div class="panel-body" style="padding: 30px 0;">
                    <div class="urlArr">
                    {{range $k, $agentUrl := .agentUrlList}}
                        <div class="form-group">
                            <label class="col-sm-2 control-label">代理链接{{$k | addOne}}</label>
                            <input type="hidden" id="agentUrl{{$k |addOne}}" class="agentIdInput" value="{{$agentUrl.Id}}"/>
                            <div class="col-sm-4">
                                <input type="text" class="form-control agentInput" id="{{$k |addOne}}" value="{{$agentUrl.Url}}">
                                {{if eq $agentUrl.HasOwn 1}}<a>未使用</a>{{end}}
                                {{if eq $agentUrl.HasOwn 2}}<a>已使用</a>{{end}}
                            </div>
                        </div>
                    {{end}}   
                    </div>
                    <img src="../../static/img/addUrl.png" class="newAddUrl" id="newAddUrl" style="margin-left: 15%; cursor: pointer;" />
                    <button type="button" class="btn btn-info urlManagementDtlSave" id="urlManagementDtlSave" style="margin: 0 auto; display: block; width: 120px;">保存</button>
                </div>
            </div>
        </form>
    </div>
</div>




<script>

    //机构信息保存按钮事件
    $('#jigouDtlSave').off('click').on('click', function(){
        var orgId = $('#orgId').val();
        var busId = $('#busId').val();
        var jigouName = $.trim($("#jigouName").val());  //机构名称
        var contactAddr = $.trim($("#contactAddr").val());  //通讯录地址
        var contactMail = $.trim($("#contactMail").val());  //联系邮箱
        var contactName = $.trim($("#contactName").val());  //联系人姓名
        var contactPhone = $.trim($("#contactPhone").val());  //手机号码
        var weixinCode = $.trim($("#weixinCode").val());  //微信
        var QQCode = $.trim($("#QQCode").val());  //QQ
        var eMail = $.trim($("#eMail").val());  //邮箱

        if (!jigouName){
            alert("请输入机构名称！");
            return;
        }

        //验证邮箱
        if(contactMail && !/^(\w)+(\.\w+)*@(\w)+((\.\w{2,3}){1,3})$/.test(contactMail)){
            alert('邮箱格式不正确！');
            return;
        }
        if(eMail && !/^(\w)+(\.\w+)*@(\w)+((\.\w{2,3}){1,3})$/.test(eMail)){
            alert('邮箱格式不正确！');
            return;
        }

        //验证手机号码
        if(contactPhone && !/^1\d{10}$/.test(contactPhone)){
            alert('手机号码格式不正确！');
            return;
        }

        $.zpost("/organization/update", {
                OrgId: orgId,
                BusId: busId,
                OrgName: jigouName,
                Address: contactAddr,
                OrgEmail: contactMail,
                BusName: contactName,
                Phone: contactPhone,
                Wechat: weixinCode,
                Qq: QQCode,
                BusEmail: eMail
            },
            function (result) {
                if (result.ret == 200) {
                    alert("保存成功!");
                } else {
                    alert(result.err)
                }
            }
        );
    });



   

    //利率类型选择（区间、定值）
    $('#rateTypeSelect').on('change', function(){
        if($(this).find('option:selected').text() == '区间'){
            $('.rate').hide();
            $('.rate_m').show();
            $("#rate").val("");
        }else{
            $('.rate').show();
            $('.rate_m').hide();
            $("#minRate").val("");
            $("#maxRate").val("");
        }
    });

    //贷前服务费类型选择（区间、定值）
    $('#beforeLoanFeeTypeSelect').on('change', function(){
        if($(this).find('option:selected').text() == '区间'){
            $('.service').hide();
            $('.service_m').show();
            $("#beforeLoanServiceFee").val("");
        }else{
            $('.service').show();
            $('.service_m').hide();
            $("#minLoanServiceFee").val("");
            $("#maxLoanServiceFee").val("");
        }
    });

    //管理费费类型选择（区间、定值）
    $('#adminFeeTypeSelect').on('change', function(){
        if($(this).find('option:selected').text() == '区间'){
            $('.strative').hide();
            $('.strative_m').show();
            $("#administrativeFee").val("");
        }else{
            $('.strative').show();
            $('.strative_m').hide();
            $("#minAdministrativeFee").val("");
            $("#maxAdministrativeFee").val("");
        }
    });

    //图片上传
    $("#imgSelect").on("change", function () {
        var formData = new FormData($("#imgInput")[0]);
        var file = $('#imgSelect').val();
        if(!/\.(gif|jpg|jpeg|png|gif|jpg|png)$/i.test(file)){
            alert("图片类型必须是.gif,jpeg,jpg,png中的一种");
            return false;
        }
        $.ajax({
            url: '/product/uploadIcon',
            type: 'POST',
            data: formData,
            async: false,
            cache: false,
            contentType: false,
            processData: false,
            success: function (data) {
                if (data.ret = 200) {
                    $("#imgDisplay").attr("src", data.url);
                    $("#imgUrl").val(data.url);
                } else {
                    alert("上传失败！");
                }
            }
        });
    });

    //贷款期限单位联动
    $("#minDeadlineUnit").on("change", function () {
        $("#maxDeadlineUnit").val($(this).val());
    });
    $("#maxDeadlineUnit").on("change", function () {
        $("#minDeadlineUnit").val($(this).val());
    });

    //利率单位联动
    $("#minRateUnit").on("change", function () {
        $("#maxRateUnit").val($(this).val());
        $("#rateUnit").val($(this).val());
    });
    $("#maxRateUnit").on("change", function () {
        $("#minRateUnit").val($(this).val());
        $("#rateUnit").val($(this).val());
    });
    $("#rateUnit").on("change",function(){
        $("#minRateUnit").val($(this).val());
        $("#maxRateUnit").val($(this).val());
    });

    //管理费单位联动
    $("#minAdministrativeFeeUnit").on("change", function () {
        $("#maxAdministrativeFeeUnit").val($(this).val());
        $("#administrativeFeeUnit").val($(this).val());
    });
    $("#maxAdministrativeFeeUnit").on("change", function () {
        $("#minAdministrativeFeeUnit").val($(this).val());
        $("#administrativeFeeUnit").val($(this).val());
    });
    $("#administrativeFeeUnit").on("change",function(){
        $("#minAdministrativeFeeUnit").val($(this).val());
        $("#maxAdministrativeFeeUnit").val($(this).val());
    });


    //产品信息保存按钮事件
    $("#proDtlSave").off('click').on('click', function(){
        var productId = $('#productId').val();  //产品ID
        var cooperationType = $('#cooperationType').val();   //h5合作
        var orgId = $('#orgId').val();   //机构id
        var busId = $('#busId').val();   //商务联系人id
        var proName = $.trim($('#proName').val());   //产品名称
        var imgUrl = $('#imgUrl').val();    //产品logo
        var proApplicable = $.trim($('#proApplicable').val());  //产品期数
        var proApplicableUnit = $('#proApplicableUnit').val();  //产品期数单位
        var LendingRate = $.trim($('#LendingRate').val());   //放款速度
        var minLimit = $.trim($('#minLimit').val());   //最小额度
        var maxLimit = $.trim($('#maxLimit').val());   //最大额度
        var minDeadline = $.trim($('#minDeadline').val());  //最小贷款期限
        var minDeadlineUnit = $('#minDeadlineUnit option:selected').index();  //最小贷款期限单位
        var maxDeadline = $.trim($('#maxDeadline').val());  //最大贷款期限
        var maxDeadlineUnit = $('#maxDeadlineUnit option:selected').index();  //最大贷款期限单位
        var rateTypeSelect = $('#rateTypeSelect option:selected').index() + 1;   //利率类型
        var rate = $.trim($('#rate').val());   //利率
        var rateUnit = $('#rateUnit option:selected').index() + 1;   //利率单位
        var minRate = $.trim($('#minRate').val());   //最小利率
        var minRateUnit = $('#minRateUnit option:selected').index() + 1;   //最小利率单位
        var maxRate = $.trim($('#maxRate').val());   //最大利率
        var maxRateUnit = $('#maxRateUnit option:selected').index() + 1;   //最大利率单位
        var beforeLoanFeeTypeSelect = $('#beforeLoanFeeTypeSelect option:selected').index() + 1;   //贷前服务费类型
        var beforeLoanServiceFee = $.trim($('#beforeLoanServiceFee').val());  //贷前服务费
        var minLoanServiceFee = $.trim($('#minLoanServiceFee').val());   //最小服务费
        var maxLoanServiceFee = $.trim($('#maxLoanServiceFee').val());   //最大服务费
        var adminFeeTypeSelect = $('#adminFeeTypeSelect option:selected').index() + 1;    //管理费类型
        var administrativeFee = $.trim($('#administrativeFee').val());   //管理费
        var administrativeFeeUnit = $('#administrativeFeeUnit option:selected').index() + 1;   //管理费单位
        var minAdministrativeFee = $.trim($('#minAdministrativeFee').val());  //最小管理费
        var minAdministrativeFeeUnit = $('#minAdministrativeFeeUnit option:selected').index() + 1;   //最小管理费单位
        var maxAdministrativeFee = $.trim($('#maxAdministrativeFee').val());  //最大管理费
        var maxAdministrativeFeeUnit = $('#maxAdministrativeFeeUnit option:selected').index() + 1;   //最大管理费单位
        var chargeInterest = $('#chargeInterest option:selected').index() + 1;   //利息收取
        var rateDetails = $.trim($('#rateDetails').val());  //利率详情
        var repaymentWay = $.trim($('#repaymentWay').val());  //还款方式
        var advanceRepay = $.trim($('#advanceRepay').val());  //提前还款
        var LatePolicy = $.trim($('#LatePolicy').val());  //逾期政策

        var isUse = $('#isUse').val();
        var proCreateTime = $('#proCreateTime').val();

        if(!proName){
            alert('请输入产品名称！');
            return;
        }
        if(!imgUrl){
            alert('请上传图片！');
            return;
        }

        if(!proApplicable){
            alert("请输入产品期数！");
            return;
        }

        if(proApplicable && proApplicable.indexOf('，') > -1){
            alert("产品期数请用英文逗号隔开！");
            return;
        }

        if(!LendingRate){
            alert("请输入放款速度！");
            return;
        }

        if(!minLimit){
            alert("请输入最小额度！");
            return;
        }

        if(minLimit && minLimit <= 0){
            alert("最小额度必须大于0！");
            return;
        }

        if(!maxLimit){
            alert("请输入最大额度！");
            return;
        }

        if(maxLimit && maxLimit <= 0){
            alert("最大额度必须大于0！");
            return;
        }

        if(!minDeadline){
            alert("请输入最小贷款期限！");
            return;
        }

        if(minDeadline && !/^[0-9]*[1-9][0-9]*$/.test(minDeadline)){
            alert("最小贷款期限必须为正整数！");
            return;
        }

        if(!maxDeadline){
            alert("请输入最大贷款期限！");
            return;
        }

        if(maxDeadline && !/^[0-9]*[1-9][0-9]*$/.test(maxDeadline)){
            alert("最大贷款期限必须为正整数！");
            return;
        }

        if($('#rateTypeSelect').find('option:selected').text() == '定值'){
            if(!rate){
                alert('请输入利率！');
                return;
            }
        }else{
            if(!minRate || !maxRate){
                alert('最小利率或最大利率不得为空！')
                return;
            }
        }

        if(!rateDetails){
            alert('请输入利率详情！')
            return;
        }
        if(!repaymentWay){
            alert('请输入还款方式！')
            return;
        }
        if(!advanceRepay){
            alert('请输入提前还款！')
            return;
        }
        if(!LatePolicy){
            alert('请输入逾期政策！')
            return;
        }

        $.zpost("/product/update", {
                Id: productId,
                OrgId: orgId,
                BusId: busId,
                ProName: proName,
                LoanTermCount: proApplicable,
                LoanTermCountType: proApplicableUnit,
                LoanSpeed: LendingRate,
                MinMoney: minLimit,
                MaxMoney: maxLimit,
                MinLoanTerm: minDeadline,
                MaxLoanTerm: maxDeadline,
                LoanTermUnit: minDeadlineUnit,
                MinFee: minRate,
                MaxFee: maxRate,
                FeeMethod: minRateUnit,
                LoanFee: rate,
                FeeType: rateTypeSelect,
                LoanServiceBeforeFee: beforeLoanServiceFee,
                MinServiceFee: minLoanServiceFee,
                MaxServiceFee: maxLoanServiceFee,
                ServiceFeeType: beforeLoanFeeTypeSelect,
                ManagementFee: administrativeFee,
                ManagementFeeType: adminFeeTypeSelect,
                MinManagementFee: minAdministrativeFee,
                MaxManagementFee: maxAdministrativeFee,
                ManagementFeeUnit: minAdministrativeFeeUnit,
                InterestRateDetails: rateDetails,
                PaymentMethod: repaymentWay,
                Prepayment: advanceRepay,
                LatePolicy: LatePolicy,
                ProductLogo: imgUrl,
                CooperationType: cooperationType,
                FeePayTimeType: chargeInterest,
                IsUse: isUse,
                CreateTime: proCreateTime
            },
            function(result){
                if(result.ret == 200) {
                    alert("保存成功!");
                }else{
                    alert(result.err);
                }
            }
        );
    });


    //结算信息保存按钮事件
    $('#settleDtlSave').off('click').on('click', function(){
        var cleaningId = $('#cleaningId').val();
        var proId = $("#proId").val();   //产品id
        var cooperateModel = $('#cooperateModel option:selected').index() + 1;    //合作模式
        var settleWays = $('#settleWays option:selected').index() + 1;    //结算方式
        var ASelect = $('#ASelect').val();   //A的有效性定义
        var APrice = $.trim($('#APrice').val());    //A的价格
        var first_lend = $.trim($('#first_lend').val());   //S的首借百分比
        var after_lend = $.trim($('#after_lend').val());   //S的复借百分比
        var settlementInterval = $.trim($('#settlementInterval').val());   //结算周期
        var companyName = $.trim($('#companyName').val());   //公司名称
        var companyAddr = $.trim($('#companyAddr').val());   //公司地址
        var dutyParagraph = $.trim($('#dutyParagraph').val());   //税号
        var openingBank = $.trim($('#openingBank').val());   //开户行
        var bankAccount = $.trim($('#bankAccount').val());   //银行账号
        var companyWebsiteAddr = $.trim($('#companyWebsiteAddr').val());   //公司网址
        var channelNo = $.trim($('#channelNo').val());   //渠道号
        var bgAccount = $.trim($('#bgAccount').val());   //后台账号
        var bgPassword = $.trim($('#bgPassword').val());   //后台密码

        $.zpost("/cleaning/updateH5", {
                Id: cleaningId,
                ProductId: proId,
                JointMode: cooperateModel,
                CleaningType: settleWays,
                CpaDefine: ASelect,
                CpaPrice: APrice,
                CpsFirstPer: first_lend,
                CpsAgainPer: after_lend,
                CleaningCycle: settlementInterval,
                CompanyName: companyName,
                CompanyAddress: companyAddr,
                TaxNumber: dutyParagraph,
                BankAccount: openingBank,
                AccountBank: bankAccount,
                BackUrl: companyWebsiteAddr,
                BackAccount: bgAccount,
                BackPwd: bgPassword,
                FromNum: channelNo
            },
            function (result) {
                if (result.ret == 200) {
                    alert("保存成功!")
                    $("#orgId").val(result.proId);
                } else {
                    alert(result.err)
                }
            }
        );
    });


    //链接信息保存按钮事件
    $("#urlManagementDtlSave").off('click').on('click', function(){
        var mainUrlId = $('#mainUrlId').val();
        var productId = $('#productId').val();
        var BeforeId = $('#BeforeId').val();
        var AfterId = $('#AfterId').val();
        var UrlId = $('#UrlId').val();

        var url1 = $.trim($('#url1').val());   //我司链接
        var regste_url_before = $.trim($('#regste_url_before').val());   //注册前链接
        var regste_url_after = $.trim($('#regste_url_after').val());   //注册后链接

        if(!url1){
            alert('请输入我司链接！');
            return;
        }

        if(!regste_url_before){
            alert('请输入注册前链接！');
            return;
        }

        //将代理链接拼接
        var agentInputArr = [];
        var agentInputArr_str = '';
        $.each($('.agentInput'), function(index, value){
            agentInputArr.push($.trim($(this).val()));
        });
        agentInputArr_str = agentInputArr.join(',');

        //将代理链接id拼接
        var agentIdArray = [];
        var agentIdArray_str = '';
        $.each($('.agentIdInput'), function(index, value){
            agentIdArray.push($.trim($(this).val()));
        });
        agentIdArray_str = agentIdArray.join(',');
        

        $.zpost("/url/update", {
                Id: mainUrlId,
                ProductId: productId,
                BeforeId: BeforeId,
                AfterId: AfterId,
                UrlId: UrlId,
                Url: url1,
                RegsteUrlBefore: regste_url_before,
                RegsteUrlAfter: regste_url_after,
                agentUrl: agentInputArr_str,
                agentUrlId: agentIdArray_str
            },
            function (result) {
                if (result.ret == 200) {
                    alert("保存成功！");
                    getpage(window.sessionStorage.URl);
                } else {
                    alert(result.err + '：' + result.msg);
                }
            }
        );
    });

    //点击添加代理链接
    var count = $("#agentUrlCount").val();
    $('#newAddUrl').off('click').on('click', function(){
        var urlHtml =   '<div class="form-group">'+
                            '<label class="col-sm-2 control-label">代理链接' + count + '</label>'+
                            '<div class="col-sm-4">'+
                                '<input type="text" class="form-control agentInput">'+
                            '<div>'+
                        '<div>';
        count ++;
        $('.urlArr').append(urlHtml);
    });


</script>

































































































